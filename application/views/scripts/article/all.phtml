<div id="articles_page" class="page articles">
    <div class="page_title"><?php echo $this->translate('Контент сайта'); ?></div>
    <div class="div_hr"></div>
    <div class="page_content">
        <?php
        if (count($this->paginator)) {
            echo $this->paginationControl($this->paginator, 'Sliding', 'pagers/full_views_pagination_control.phtml');
            $bbcode = Zend_Markup::factory('Bbcode');
            ?>

            <?php foreach ($this->paginator as $article): ?>
                <div class="article_item">
                    <div class="article_title">
                        <a href="<?php echo $this->url(array('controller' => 'article', 'action' => 'id', 'id' => $this->escape($article['id'])), 'article', true) ?>"><?php echo $this->escape($article['title']); ?></a>
                    </div>
                    <?php if ($this->escape($article['image']) != '') { ?>
                        <img class="img-polaroid article_image pull-left" src="<?php echo $this->escape($article['image']); ?>">
                    <?php } ?>
                    <div class="article_text">
                        <?php
                        if ($article['annotation'] != '') {
                            echo $this->escape($article['annotation']);
                        } else {
                            echo $bbcode->render((string) ($this->truncate($this->escape($article['text']))->toLength(250)));
                        }
                        ?>
                    </div>
                    <div class="article_controls">
                        <a href = "<?php echo $this->url(array('controller' => 'article', 'action' => 'id', 'id' => $this->escape($article['id'])), 'article', true) ?>" class = "btn btn-small btn-inverse article_more"><?php echo $this->translate('Подробнее...') ?></a>
                    </div>
                    <div class="article_info">
                        <div class="article_type_name article_info_item">
                            <span class="bold_text"><?php echo $this->translate('Тип статьи') ?>: </span><?php echo $this->escape($article['article_type_name']); ?>
                        </div>
                        <div class="article_author article_info_item">
                            <span class="bold_text"><?php echo $this->translate('Автор') ?>: </span>
                            <a href="<?php echo $this->url(array('controller' => 'user', 'action' => 'id', 'id' => $this->escape($article['user_id'])), 'user', true) ?>" target="_blank"><?php echo $article['user_login']; ?></a>
                        </div>
                        <div class="article_views article_info_item">
                            <span class="bold_text"><?php echo $this->translate('Просмотров') ?>: </span><?php echo $this->escape($article['views']); ?>
                        </div>
                        <div class="article_date_create article_info_item">
                            <span class="bold_text"><?php echo $this->translate('Опубликовано') ?>: </span><?php echo $this->escape($article['date_create']); ?>
                        </div>
                        <?php if ($article['date_create'] != $article['date_edit']) { ?>
                            <div class="article_date_edit article_info_item">
                                <span class="bold_text"><?php echo $this->translate('Редактировалось') ?>: </span><?php echo $this->escape($article['date_edit']); ?>
                            </div>
                        <?php } ?>
                    </div>
                </div>
                <?php
            endforeach;
            echo $this->paginationControl($this->paginator, 'Sliding', 'pagers/full_views_pagination_control.phtml');
        } else {
            ?>
            <div class="alert alert-error alert-block">
                <button type="button" class="close" data-dismiss="alert">×</button>
                <h4><?php echo $this->translate('Ошибка!'); ?></h4>
                <?php echo $this->translate('Контент на сайте не найден!'); ?>
            </div>
        <?php } ?>
    </div>
</div>

<div class="row m-t-15">
	<div class="col-lg-7 col-md-7 col-sm-12 col-xs-12">
		<div class="block block-ui-bordered block-media">
			<div class="block-header">
				<div class="block-title text-uppercase text-bold">
					<?php echo $this->translate('Новости портала') ?>
				</div>
			</div>
			<div class="block-body">
				<?php if (count($this->posts_data) > 0) { ?>
					<?php
					$filter = new Zend_Filter();
					$filter->addFilter(new Zend_Filter_StripTags())
							->addFilter(new Zend_Filter_StringTrim());
					$bbcode = Zend_Markup::factory('Bbcode');
					?>
					<ul class="media-list">
						<?php foreach ($this->posts_data as $post) : ?>
							<?php $post_id_url = $this->url(array('module' => 'default', 'controller' => 'post', 'action' => 'id', 'post_id' => $this->escape($post->id)), 'postId', true); ?>
							<li class="media">
								<?php if ($post->image) { ?>
									<a class="pull-left" href="<?php echo $post_id_url; ?>">
										<div class="img-wrapper-100-100">
											<img class="media-object img-thumbnail img-responsive img-size-100" src="<?php echo $post->image; ?>" alt="<?php echo $post->title; ?>">
										</div>
									</a>
								<?php } ?>
								<div class="media-body">
									<h4 class="media-heading"><a href="<?php echo $post_id_url; ?>"><?php echo $this->truncate($post->title)->toLength(100); ?></a></h4>
									<?php
									if ($post->annotation != '') {
										echo $this->escape($post->annotation);
									} else {
										echo $bbcode->render((string) ($this->truncate($this->escape($post->text))->toLength(250)));
									}
									?>
								</div>
							</li>
						<?php endforeach; ?>
					</ul>
				<?php } else { ?>
					<?php
					/*
					 * todo: Сделать хелпер для вывода ошибок.
					 */
					echo 'Ошибка';
					?>
				<?php } ?>
			</div>
		</div>
	</div>
	<div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
		<div class="block block-ui-bordered block-media">
			<div class="block-header">
				<div class="block-title text-uppercase text-bold">
					<?php echo $this->translate('Лиги портала') ?>
				</div>
			</div>
			<div class="block-body">
				<ul class="media-list">
					<?php foreach ($this->leagues_data as $league): ?>
						<?php $league_url = $this->url(array('module' => 'default', 'controller' => 'league', 'action' => 'id', 'league_id' => $this->escape($league->id)), 'leagueIdAll', true); ?>
						<li class="media">
							<a class="pull-left" href="<?php echo $league_url; ?>">
								<img class="media-object img-thumbnail img-responsive img-size-100" src="<?php echo $league->url_logo; ?>" alt="<?php echo $league->name; ?>">
							</a>
							<div class="media-body">
								<h4 class="media-heading"><a href="<?php echo $league_url; ?>"><?php echo $league->name; ?></a></h4>
								<?php echo $league->description; ?>
							</div>
						</li>
					<?php endforeach; ?>
				</ul>
			</div>
		</div>
		<!-- RSS news from F1news.ru -->
		<div class="block block-ui-bordered block-media block-media-rss m-t-15">
			<div class="block-header">
				<div class="block-title text-uppercase text-bold">
					<?php echo $this->translate('Новости из мира автоспорта') ?>
				</div>
			</div>
			<div class="block-body">
				<ul class="media-list">
					<?php for ($i = 1; $i < $this->rss_count; $i++) { ?>
						<?php $rss_url = $this->rss_element[$this->rss_index["LINK"][$i + 1]]["value"]; ?>
						<li class="media">
							<div class="media-body">
								<h4 class="media-heading"><a href="<?php echo $rss_url; ?>" target="_blank"><?php echo $this->rss_element[$this->rss_index["TITLE"][$i + 1]]["value"]; ?></a></h4>
									<?php echo $this->rss_element[$this->rss_index["DESCRIPTION"][$i]]["value"]; ?>
							</div>
						</li>
					<?php } ?>
				</ul>
			</div>
		</div>
	</div>
</div>